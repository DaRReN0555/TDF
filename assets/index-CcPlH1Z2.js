const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-D5W15YSd.js","assets/colorToUniform-Cug6zptJ.js","assets/FederatedEventTarget-CUAVxuas.js","assets/CanvasTextSystem-CP5rqc71.js","assets/CanvasPool-D4MxEvq7.js","assets/init-C7VkSUVH.js","assets/webworkerAll-CY7xZ3-f.js","assets/WebGPURenderer-CUqby_Se.js","assets/SharedSystems-CC4Slh9A.js","assets/WebGPURenderer-C035CyA1.js","assets/WebGLRenderer-DthZLcgn.js","assets/WebGLRenderer-C5DMQeAb.js"])))=>i.map(i=>d[i]);
import{B as e,D as t,E as n,Et as r,F as i,I as a,R as o,St as s,Tt as c,V as l,bt as u,ct as d,ft as f,g as p,gt as m,ht as h,it as g,wt as ee,yt as te,z as _}from"./colorToUniform-Cug6zptJ.js";import{A as v,D as ne,E as re,M as ie,N as ae,O as y,P as oe,S as se,T as ce,_ as le,f as ue,j as de,k as fe,m as b,p as pe,v as x,x as me,y as he}from"./CanvasTextSystem-CP5rqc71.js";import"./FederatedEventTarget-CUAVxuas.js";import{h as ge,m as _e}from"./SharedSystems-CC4Slh9A.js";import"./CanvasPool-D4MxEvq7.js";import"./WebGLRenderer-C5DMQeAb.js";import"./WebGPURenderer-C035CyA1.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var ve=`modulepreload`,ye=function(e){return`/`+e},be={};const xe=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=ye(t,n),t in be)return;be[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``;if(n)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let o=document.createElement(`link`);if(o.rel=r?`stylesheet`:ve,r||(o.as=`script`),o.crossOrigin=``,o.href=t,a&&o.setAttribute(`nonce`,a),document.head.appendChild(o),r)return new Promise((e,n)=>{o.addEventListener(`load`,e),o.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[])e.status===`rejected`&&i(e.reason);return e().catch(i)})};var Se={extension:{type:c.Environment,name:`browser`,priority:-1},test:()=>!0,load:async()=>{await xe(()=>import(`./browserAll-D5W15YSd.js`),__vite__mapDeps([0,1,2,3,4,5]))}},Ce={extension:{type:c.Environment,name:`webworker`,priority:0},test:()=>typeof self<`u`&&self.WorkerGlobalScope!==void 0,load:async()=>{await xe(()=>import(`./webworkerAll-CY7xZ3-f.js`),__vite__mapDeps([6,1,3,4,5]))}},we;function Te(e){return we===void 0&&(we=(()=>{let t={stencil:!0,failIfMajorPerformanceCaveat:e??ge.defaultOptions.failIfMajorPerformanceCaveat};try{if(!o.get().getWebGLRenderingContext())return!1;let e=o.get().createCanvas().getContext(`webgl`,t),n=!!e?.getContextAttributes()?.stencil;if(e){let t=e.getExtension(`WEBGL_lose_context`);t&&t.loseContext()}return e=null,n}catch{return!1}})()),we}var Ee;async function De(e={}){return Ee===void 0&&(Ee=await(async()=>{let t=o.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(e)).requestDevice(),!0}catch{return!1}})()),Ee}var Oe=[`webgl`,`webgpu`,`canvas`];async function ke(e){let t=[];e.preference?(t.push(e.preference),Oe.forEach(n=>{n!==e.preference&&t.push(n)})):t=Oe.slice();let n,r={};for(let i=0;i<t.length;i++){let a=t[i];if(a===`webgpu`&&await De()){let{WebGPURenderer:t}=await xe(async()=>{let{WebGPURenderer:e}=await import(`./WebGPURenderer-CUqby_Se.js`);return{WebGPURenderer:e}},__vite__mapDeps([7,1,8,9,4]));n=t,r={...e,...e.webgpu};break}else if(a===`webgl`&&Te(e.failIfMajorPerformanceCaveat??ge.defaultOptions.failIfMajorPerformanceCaveat)){let{WebGLRenderer:t}=await xe(async()=>{let{WebGLRenderer:e}=await import(`./WebGLRenderer-DthZLcgn.js`);return{WebGLRenderer:e}},__vite__mapDeps([10,1,8,11]));n=t,r={...e,...e.webgl};break}else if(a===`canvas`)throw r={...e},Error(`CanvasRenderer is not yet implemented`)}if(delete r.webgpu,delete r.webgl,!n)throw Error(`No available renderer for the current environment`);let i=new n;return await i.init(r),i}var Ae=class e{constructor(...e){this.stage=new l,e[0]!==void 0&&h(m,`Application constructor options are deprecated, please use Application.init() instead.`)}async init(t){t={...t},this.renderer=await ke(t),e._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return h(m,`Application.view is deprecated, please use Application.canvas instead.`),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,n=!1){let r=e._plugins.slice(0);r.reverse(),r.forEach(e=>{e.destroy.call(this)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(t),this.renderer=null}};Ae._plugins=[];var je=Ae;r.handleByList(c.Application,je._plugins),r.add(_e);var Me=class extends se{constructor(e,t){super();let{textures:n,data:r}=e;Object.keys(r.pages).forEach(e=>{let t=r.pages[parseInt(e,10)],i=n[t.id];this.pages.push({texture:i})}),Object.keys(r.chars).forEach(e=>{let t=r.chars[e],{frame:i,source:a,rotate:o}=n[t.page],s=u.transformRectCoords(t,i,o,new te),c=new d({frame:s,orig:new te(0,0,t.width,t.height),source:a,rotate:o});this.chars[e]={id:e.codePointAt(0),xOffset:t.xOffset,yOffset:t.yOffset,xAdvance:t.xAdvance,kerning:t.kerning??{},texture:c}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=r.distanceField??{type:`none`,range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){let{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){le.install(e)}static uninstall(e){le.uninstall(e)}},Ne={test(e){return typeof e==`string`&&e.startsWith(`info face=`)},parse(e){let t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let e in t){let r=t[e].match(/^[a-z]+/gm)[0],i=t[e].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(let e in i){let t=i[e].split(`=`),n=t[0],r=t[1].replace(/"/gm,``),o=parseFloat(r);a[n]=isNaN(o)?r:o}n[r].push(a)}let r={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:``,distanceField:null,baseLineOffset:0},[i]=n.info,[a]=n.common,[o]=n.distanceField??[];o&&(r.distanceField={range:parseInt(o.distanceRange,10),type:o.fieldType}),r.fontSize=parseInt(i.size,10),r.fontFamily=i.face,r.lineHeight=parseInt(a.lineHeight,10);let s=n.page;for(let e=0;e<s.length;e++)r.pages.push({id:parseInt(s[e].id,10)||0,file:s[e].file});let c={};r.baseLineOffset=r.lineHeight-parseInt(a.base,10);let l=n.char;for(let e=0;e<l.length;e++){let t=l[e],n=parseInt(t.id,10),i=t.letter??t.char??String.fromCharCode(n);i===`space`&&(i=` `),c[n]=i,r.chars[i]={id:n,page:parseInt(t.page,10)||0,x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xOffset:parseInt(t.xoffset,10),yOffset:parseInt(t.yoffset,10),xAdvance:parseInt(t.xadvance,10),kerning:{}}}let u=n.kerning||[];for(let e=0;e<u.length;e++){let t=parseInt(u[e].first,10),n=parseInt(u[e].second,10),i=parseInt(u[e].amount,10);r.chars[c[n]].kerning[c[t]]=i}return r}},Pe={test(e){let t=e;return typeof t!=`string`&&`getElementsByTagName`in t&&t.getElementsByTagName(`page`).length&&t.getElementsByTagName(`info`)[0].getAttribute(`face`)!==null},parse(e){let t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:``,distanceField:null,baseLineOffset:0},n=e.getElementsByTagName(`info`)[0],r=e.getElementsByTagName(`common`)[0],i=e.getElementsByTagName(`distanceField`)[0];i&&(t.distanceField={type:i.getAttribute(`fieldType`),range:parseInt(i.getAttribute(`distanceRange`),10)});let a=e.getElementsByTagName(`page`),o=e.getElementsByTagName(`char`),s=e.getElementsByTagName(`kerning`);t.fontSize=parseInt(n.getAttribute(`size`),10),t.fontFamily=n.getAttribute(`face`),t.lineHeight=parseInt(r.getAttribute(`lineHeight`),10);for(let e=0;e<a.length;e++)t.pages.push({id:parseInt(a[e].getAttribute(`id`),10)||0,file:a[e].getAttribute(`file`)});let c={};t.baseLineOffset=t.lineHeight-parseInt(r.getAttribute(`base`),10);for(let e=0;e<o.length;e++){let n=o[e],r=parseInt(n.getAttribute(`id`),10),i=n.getAttribute(`letter`)??n.getAttribute(`char`)??String.fromCharCode(r);i===`space`&&(i=` `),c[r]=i,t.chars[i]={id:r,page:parseInt(n.getAttribute(`page`),10)||0,x:parseInt(n.getAttribute(`x`),10),y:parseInt(n.getAttribute(`y`),10),width:parseInt(n.getAttribute(`width`),10),height:parseInt(n.getAttribute(`height`),10),xOffset:parseInt(n.getAttribute(`xoffset`),10),yOffset:parseInt(n.getAttribute(`yoffset`),10),xAdvance:parseInt(n.getAttribute(`xadvance`),10),kerning:{}}}for(let e=0;e<s.length;e++){let n=parseInt(s[e].getAttribute(`first`),10),r=parseInt(s[e].getAttribute(`second`),10),i=parseInt(s[e].getAttribute(`amount`),10);t.chars[c[r]].kerning[c[n]]=i}return t}},Fe={test(e){return typeof e==`string`&&e.includes(`<font>`)?Pe.test(o.get().parseXML(e)):!1},parse(e){return Pe.parse(o.get().parseXML(e))}},Ie=[`.xml`,`.fnt`],Le={extension:{type:c.CacheParser,name:`cacheBitmapFont`},test:e=>e instanceof Me,getCacheableAssets(e,t){let n={};return e.forEach(e=>{n[e]=t,n[`${e}-bitmap`]=t}),n[`${t.fontFamily}-bitmap`]=t,n}},Re={extension:{type:c.LoadParser,priority:fe.Normal},name:`loadBitmapFont`,id:`bitmap-font`,test(e){return Ie.includes(y.extname(e).toLowerCase())},async testParse(e){return Ne.test(e)||Fe.test(e)},async parse(e,t,n){let r=Ne.test(e)?Ne.parse(e):Fe.parse(e),{src:i}=t,{pages:a}=r,o=[],s=r.distanceField?{scaleMode:`linear`,alphaMode:`premultiply-alpha-on-upload`,autoGenerateMipmaps:!1,resolution:1}:{};for(let e=0;e<a.length;++e){let t=a[e].file,n=y.join(y.dirname(i),t);n=ce(n,i),o.push({src:n,data:s})}let c=await n.load(o),l=o.map(e=>c[e.src]);return new Me({data:r,textures:l},i)},async load(e,t){return await(await o.get().fetch(e)).text()},async unload(e,t,n){await Promise.all(e.pages.map(e=>n.unload(e.texture.source._sourceOrigin))),e.destroy()}},ze=class{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log(`[BackgroundLoader] assets: `,this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<t;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}},Be={extension:{type:c.CacheParser,name:`cacheTextureArray`},test:e=>Array.isArray(e)&&e.every(e=>e instanceof d),getCacheableAssets:(e,t)=>{let n={};return e.forEach(e=>{t.forEach((t,r)=>{n[e+(r===0?``:r+1)]=t})}),n}};async function Ve(e){if(`Image`in globalThis)return new Promise(t=>{let n=new Image;n.onload=()=>{t(!0)},n.onerror=()=>{t(!1)},n.src=e});if(`createImageBitmap`in globalThis&&`fetch`in globalThis){try{let t=await(await fetch(e)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}var He={extension:{type:c.DetectionParser,priority:1},test:async()=>Ve(`data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=`),add:async e=>[...e,`avif`],remove:async e=>e.filter(e=>e!==`avif`)},Ue=[`png`,`jpg`,`jpeg`],We={extension:{type:c.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...Ue],remove:async e=>e.filter(e=>!Ue.includes(e))},Ge=`WorkerGlobalScope`in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Ke(e){return Ge?!1:document.createElement(`video`).canPlayType(e)!==``}var qe={extension:{type:c.DetectionParser,priority:0},test:async()=>Ke(`video/mp4`),add:async e=>[...e,`mp4`,`m4v`],remove:async e=>e.filter(e=>e!==`mp4`&&e!==`m4v`)},Je={extension:{type:c.DetectionParser,priority:0},test:async()=>Ke(`video/ogg`),add:async e=>[...e,`ogv`],remove:async e=>e.filter(e=>e!==`ogv`)},Ye={extension:{type:c.DetectionParser,priority:0},test:async()=>Ke(`video/webm`),add:async e=>[...e,`webm`],remove:async e=>e.filter(e=>e!==`webm`)},Xe={extension:{type:c.DetectionParser,priority:0},test:async()=>Ve(`data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=`),add:async e=>[...e,`webp`],remove:async e=>e.filter(e=>e!==`webp`)},Ze=class e{constructor(){this.loadOptions={...e.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,n)=>(this._parsersValidated=!1,e[t]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){let n={promise:null,parser:null};return n.promise=(async()=>{let r=null,i=null;if((t.parser||t.loadParser)&&(i=this._parserHash[t.parser||t.loadParser],t.loadParser&&g(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),i||g(`[Assets] specified load parser "${t.parser||t.loadParser}" not found while loading ${e}`)),!i){for(let n=0;n<this.parsers.length;n++){let r=this.parsers[n];if(r.load&&r.test?.(e,t,this)){i=r;break}}if(!i)return g(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await i.load(e,t,this),n.parser=i;for(let e=0;e<this.parsers.length;e++){let i=this.parsers[e];i.parse&&i.parse&&await i.testParse?.(r,t,this)&&(r=await i.parse(r,t,this)||r,n.parser=i)}return r})(),n}async load(t,n){this._parsersValidated||this._validateParsers();let{onProgress:r,onError:i,strategy:a,retryCount:o,retryDelay:s}=typeof n==`function`?{...e.defaultOptions,...this.loadOptions,onProgress:n}:{...e.defaultOptions,...this.loadOptions,...n||{}},c=0,l={},u=ne(t),d=de(t,e=>({alias:[e],src:e,data:{}})),f=d.reduce((e,t)=>e+(t.progressSize||1),0),p=d.map(async e=>{let t=y.toAbsolute(e.src);l[e.src]||(await this._loadAssetWithRetry(t,e,{onProgress:r,onError:i,strategy:a,retryCount:o,retryDelay:s},l),c+=e.progressSize||1,r&&r(c/f))});return await Promise.all(p),u?l[d[0].src]:l}async unload(e){let t=de(e,e=>({alias:[e],src:e})).map(async e=>{let t=y.toAbsolute(e.src),n=this.promiseCache[t];if(n){let r=await n.promise;delete this.promiseCache[t],await n.parser?.unload?.(r,e,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(!t.name&&!t.id?g(`[Assets] parser should have an id`):(e[t.name]||e[t.id])&&g(`[Assets] parser id conflict "${t.id}"`),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,n,r){let i=0,{onError:a,strategy:o,retryCount:s,retryDelay:c}=n,l=e=>new Promise(t=>setTimeout(t,e));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),r[t.src]=await this.promiseCache[e].promise;return}catch(n){if(delete this.promiseCache[e],delete r[t.src],i++,o===`retry`&&!(o!==`retry`||i>s)){a&&a(n,t),await l(c);continue}if(o===`skip`){a&&a(n,t);return}throw a&&a(n,t),Error(`[Loader.load] Failed to load ${e}.
${n}`)}}};Ze.defaultOptions={onProgress:void 0,onError:void 0,strategy:`throw`,retryCount:3,retryDelay:250};var Qe=Ze;function $e(e,t){if(Array.isArray(t)){for(let n of t)if(e.startsWith(`data:${n}`))return!0;return!1}return e.startsWith(`data:${t}`)}function et(e,t){let n=e.split(`?`)[0],r=y.extname(n).toLowerCase();return Array.isArray(t)?t.includes(r):r===t}var tt=`.json`,nt=`application/json`,rt={extension:{type:c.LoadParser,priority:fe.Low},name:`loadJson`,id:`json`,test(e){return $e(e,nt)||et(e,tt)},async load(e){return await(await o.get().fetch(e)).json()}},it=`.txt`,at=`text/plain`,ot={name:`loadTxt`,id:`text`,extension:{type:c.LoadParser,priority:fe.Low,name:`loadTxt`},test(e){return $e(e,at)||et(e,it)},async load(e){return await(await o.get().fetch(e)).text()}},st=[`normal`,`bold`,`100`,`200`,`300`,`400`,`500`,`600`,`700`,`800`,`900`],ct=[`.ttf`,`.otf`,`.woff`,`.woff2`],lt=[`font/ttf`,`font/otf`,`font/woff`,`font/woff2`],ut=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function dt(e){let t=y.extname(e),n=y.basename(e,t).replace(/(-|_)/g,` `).toLowerCase().split(` `).map(e=>e.charAt(0).toUpperCase()+e.slice(1)),r=n.length>0;for(let e of n)if(!e.match(ut)){r=!1;break}let i=n.join(` `);return r||(i=`"${i.replace(/[\\"]/g,`\\$&`)}"`),i}var ft=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function pt(e){return ft.test(e)?e:encodeURI(e)}var mt={extension:{type:c.LoadParser,priority:fe.Low},name:`loadWebFont`,id:`web-font`,test(e){return $e(e,lt)||et(e,ct)},async load(e,t){let n=o.get().getFontFaceSet();if(n){let r=[],i=t.data?.family??dt(e),a=t.data?.weights?.filter(e=>st.includes(e))??[`normal`],o=t.data??{};for(let t=0;t<a.length;t++){let s=a[t],c=new FontFace(i,`url(${pt(e)})`,{...o,weight:s});await c.load(),n.add(c),r.push(c)}return v.has(`${i}-and-url`)?v.get(`${i}-and-url`).entries.push({url:e,faces:r}):v.set(`${i}-and-url`,{entries:[{url:e,faces:r}]}),r.length===1?r[0]:r}return g(`[loadWebFont] FontFace API is not supported. Skipping loading font`),null},unload(e){let t=Array.isArray(e)?e:[e],n=t[0].family,r=v.get(`${n}-and-url`),i=r.entries.find(e=>e.faces.some(e=>t.indexOf(e)!==-1));i.faces=i.faces.filter(e=>t.indexOf(e)===-1),i.faces.length===0&&(r.entries=r.entries.filter(e=>e!==i)),t.forEach(e=>{o.get().getFontFaceSet().delete(e)}),r.entries.length===0&&v.remove(`${n}-and-url`)}};function ht(e,t=1){let n=re.RETINA_PREFIX?.exec(e);return n?parseFloat(n[1]):t}function gt(e,t,n){e.label=n,e._sourceOrigin=n;let r=new d({source:e,label:n}),i=()=>{delete t.promiseCache[n],v.has(n)&&v.remove(n)};return r.source.once(`destroy`,()=>{t.promiseCache[n]&&(g(`[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource.`),i())}),r.once(`destroy`,()=>{e.destroyed||(g(`[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture.`),i())}),r}var _t=`.svg`,vt=`image/svg+xml`,yt={extension:{type:c.LoadParser,priority:fe.Low,name:`loadSVG`},name:`loadSVG`,id:`svg`,config:{crossOrigin:`anonymous`,parseAsGraphicsContext:!1},test(e){return $e(e,vt)||et(e,_t)},async load(e,t,n){return t.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?xt(e):bt(e,t,n,this.config.crossOrigin)},unload(e){e.destroy(!0)}};async function bt(e,t,n,r){let i=await o.get().fetch(e),a=o.get().createImage();a.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await i.text())}`,a.crossOrigin=r,await a.decode();let s=t.data?.width??a.width,c=t.data?.height??a.height,l=t.data?.resolution||ht(e),u=Math.ceil(s*l),d=Math.ceil(c*l),f=o.get().createCanvas(u,d),p=f.getContext(`2d`);p.imageSmoothingEnabled=!0,p.imageSmoothingQuality=`high`,p.drawImage(a,0,0,s*l,c*l);let{parseAsGraphicsContext:m,...h}=t.data??{},g=new oe({resource:f,alphaMode:`premultiply-alpha-on-upload`,resolution:l,...h});return gt(g,n,e)}async function xt(e){let t=await(await o.get().fetch(e)).text(),n=new he;return n.svg(t),n}var St=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`,Ct=null,wt=class{constructor(){Ct||=URL.createObjectURL(new Blob([St],{type:`application/javascript`})),this.worker=new Worker(Ct)}};wt.revokeObjectURL=function(){Ct&&=(URL.revokeObjectURL(Ct),null)};var Tt=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`,Et=null,Dt=class{constructor(){Et||=URL.createObjectURL(new Blob([Tt],{type:`application/javascript`})),this.worker=new Worker(Et)}};Dt.revokeObjectURL=function(){Et&&=(URL.revokeObjectURL(Et),null)};var Ot=0,kt,At=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported===void 0&&(this._isImageBitmapSupported=new Promise(e=>{let{worker:t}=new wt;t.addEventListener(`message`,n=>{t.terminate(),wt.revokeObjectURL(),e(n.data)})})),this._isImageBitmapSupported}loadImageBitmap(e,t){return this._run(`loadImageBitmap`,[e,t?.data?.alphaMode])}async _initWorkers(){this._initialized||=!0}_getWorker(){kt===void 0&&(kt=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<kt&&(this._createdWorkers++,e=new Dt().worker,e.addEventListener(`message`,e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){e.error===void 0?this._resolveHash[e.uuid].resolve(e.data):this._resolveHash[e.uuid].reject(e.error),this._resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();let n=new Promise((n,r)=>{this._queue.push({id:e,arguments:t,resolve:n,reject:r})});return this._next(),n}_next(){if(!this._queue.length)return;let e=this._getWorker();if(!e)return;let t=this._queue.pop(),n=t.id;this._resolveHash[Ot]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:Ot++,id:n})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e?.(Error(`WorkerManager destroyed`))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}},jt=[`.jpeg`,`.jpg`,`.png`,`.webp`,`.avif`],Mt=[`image/jpeg`,`image/png`,`image/webp`,`image/avif`];async function Nt(e,t){let n=await o.get().fetch(e);if(!n.ok)throw Error(`[loadImageBitmap] Failed to fetch ${e}: ${n.status} ${n.statusText}`);let r=await n.blob();return t?.data?.alphaMode===`premultiplied-alpha`?createImageBitmap(r,{premultiplyAlpha:`none`}):createImageBitmap(r)}var Pt={name:`loadTextures`,id:`texture`,extension:{type:c.LoadParser,priority:fe.High,name:`loadTextures`},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:`anonymous`},test(e){return $e(e,Mt)||et(e,jt)},async load(e,t,n){let r=null;r=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await At.isImageBitmapSupported()?await At.loadImageBitmap(e,t):await Nt(e,t):await new Promise((t,n)=>{r=o.get().createImage(),r.crossOrigin=this.config.crossOrigin,r.src=e,r.complete?t(r):(r.onload=()=>{t(r)},r.onerror=n)});let i=new oe({resource:r,alphaMode:`premultiply-alpha-on-upload`,resolution:t.data?.resolution||ht(e),...t.data});return gt(i,n,e)},unload(e){e.destroy(!0)}},Ft=[`.mp4`,`.m4v`,`.webm`,`.ogg`,`.ogv`,`.h264`,`.avi`,`.mov`],It,Lt;function Rt(e,t,n){n===void 0&&!t.startsWith(`data:`)?e.crossOrigin=Bt(t):n!==!1&&(e.crossOrigin=typeof n==`string`?n:`anonymous`)}function zt(e){return new Promise((t,n)=>{e.addEventListener(`canplaythrough`,r),e.addEventListener(`error`,i),e.load();function r(){a(),t()}function i(e){a(),n(e)}function a(){e.removeEventListener(`canplaythrough`,r),e.removeEventListener(`error`,i)}})}function Bt(e,t=globalThis.location){if(e.startsWith(`data:`))return``;t||=globalThis.location;let n=new URL(e,document.baseURI);return n.hostname!==t.hostname||n.port!==t.port||n.protocol!==t.protocol?`anonymous`:``}function Vt(){let e=[],t=[];for(let n of Ft){let r=ie.MIME_TYPES[n.substring(1)]||`video/${n.substring(1)}`;Ke(r)&&(e.push(n),t.includes(r)||t.push(r))}return{validVideoExtensions:e,validVideoMime:t}}var Ht={name:`loadVideo`,id:`video`,extension:{type:c.LoadParser,name:`loadVideo`},test(e){if(!It||!Lt){let{validVideoExtensions:e,validVideoMime:t}=Vt();It=e,Lt=t}let t=$e(e,Lt),n=et(e,It);return t||n},async load(e,t,n){let r={...ie.defaultOptions,resolution:t.data?.resolution||ht(e),alphaMode:t.data?.alphaMode||await ae(),...t.data},i=document.createElement(`video`),a={preload:r.autoLoad===!1?void 0:`auto`,"webkit-playsinline":r.playsinline===!1?void 0:``,playsinline:r.playsinline===!1?void 0:``,muted:r.muted===!0?``:void 0,loop:r.loop===!0?``:void 0,autoplay:r.autoPlay===!1?void 0:``};Object.keys(a).forEach(e=>{let t=a[e];t!==void 0&&i.setAttribute(e,t)}),r.muted===!0&&(i.muted=!0),Rt(i,e,r.crossorigin);let o=document.createElement(`source`),s;if(r.mime)s=r.mime;else if(e.startsWith(`data:`))s=e.slice(5,e.indexOf(`;`));else if(!e.startsWith(`blob:`)){let t=e.split(`?`)[0].slice(e.lastIndexOf(`.`)+1).toLowerCase();s=ie.MIME_TYPES[t]||`video/${t}`}return o.src=e,s&&(o.type=s),new Promise(a=>{let s=async()=>{let o=new ie({...r,resource:i});i.removeEventListener(`canplay`,s),t.data.preload&&await zt(i),a(gt(o,n,e))};r.preload&&!r.autoPlay&&i.load(),i.addEventListener(`canplay`,s),i.appendChild(o)})},unload(e){e.destroy(!0)}},Ut={extension:{type:c.ResolveParser,name:`resolveTexture`},test:Pt.test,parse:e=>({resolution:parseFloat(re.RETINA_PREFIX.exec(e)?.[1]??`1`),format:e.split(`.`).pop(),src:e})},Wt={extension:{type:c.ResolveParser,priority:-2,name:`resolveJson`},test:e=>re.RETINA_PREFIX.test(e)&&e.endsWith(`.json`),parse:Ut.parse},S=new class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new re,this.loader=new Qe,this.cache=v,this._backgroundLoader=new ze(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){g(`[Assets]AssetManager already initialized, did you load before calling this Assets.init()?`);return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let t=e.manifest;typeof t==`string`&&(t=await this.load(t)),this.resolver.addManifest(t)}let t=e.texturePreference?.resolution??1,n=typeof t==`number`?[t]:t,r=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:r,resolution:n}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();let n=ne(e),r=de(e).map(e=>{if(typeof e!=`string`){let t=this.resolver.getAlias(e);return t.some(e=>!this.resolver.hasKey(e))&&this.add(e),Array.isArray(t)?t[0]:t}return this.resolver.hasKey(e)||this.add({alias:e,src:e}),e}),i=this.resolver.resolve(r),a=await this._mapLoadToResolve(i,t);return n?a[r[0]]:a}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let n=!1;typeof e==`string`&&(n=!0,e=[e]);let r=this.resolver.resolveBundle(e),i={},a=Object.keys(r),o=0,s=[],c=()=>{t?.(s.reduce((e,t)=>e+t,0)/o)},l=a.map((e,t)=>{let n=r[e],a=Object.values(n),l=[...new Set(a.flat())].reduce((e,t)=>e+(t.progressSize||1),0);return s.push(0),o+=l,this._mapLoadToResolve(n,e=>{s[t]=e*l,c()}).then(t=>{i[e]=t})});return await Promise.all(l),n?i[e[0]]:i}async backgroundLoad(e){this._initialized||await this.init(),typeof e==`string`&&(e=[e]);let t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e==`string`&&(e=[e]);let t=this.resolver.resolveBundle(e);Object.values(t).forEach(e=>{this._backgroundLoader.add(Object.values(e))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e==`string`)return v.get(e);let t={};for(let n=0;n<e.length;n++)t[n]=v.get(e[n]);return t}async _mapLoadToResolve(e,t){let n=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;let r=await this.loader.load(n,t);this._backgroundLoader.active=!0;let i={};return n.forEach(e=>{let t=r[e.src],n=[e.src];e.alias&&n.push(...e.alias),n.forEach(e=>{i[e]=t}),v.set(n,t)}),i}async unload(e){this._initialized||await this.init();let t=de(e).map(e=>typeof e==`string`?e:e.src),n=this.resolver.resolve(t);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=de(e);let t=this.resolver.resolveBundle(e),n=Object.keys(t).map(e=>this._unloadFromResolved(t[e]));await Promise.all(n)}async _unloadFromResolved(e){let t=Object.values(e);t.forEach(e=>{v.remove(e.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(let n of e.detections)e.skipDetections||await n.test()?t=await n.add(t):e.skipDetections||(t=await n.remove(t));return t=t.filter((e,n)=>t.indexOf(e)===n),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(t=>t in e).forEach(n=>{t.config[n]=e[n]})})}};r.handleByList(c.LoadParser,S.loader.parsers).handleByList(c.ResolveParser,S.resolver.parsers).handleByList(c.CacheParser,S.cache.parsers).handleByList(c.DetectionParser,S.detections),r.add(Be,We,He,Xe,qe,Je,Ye,rt,ot,mt,yt,Pt,Ht,Re,Le,Ut,Wt);var Gt={loader:c.LoadParser,resolver:c.ResolveParser,cache:c.CacheParser,detection:c.DetectionParser};r.handle(c.Asset,e=>{let t=e.ref;Object.entries(Gt).filter(([e])=>!!t[e]).forEach(([e,n])=>r.add(Object.assign(t[e],{extension:t[e].extension??n})))},e=>{let t=e.ref;Object.keys(Gt).filter(e=>!!t[e]).forEach(e=>r.remove(t[e]))});function Kt(e,t,n,r,i,a,o,s){let c=o-n,l=s-r,u=i-n,d=a-r,f=e-n,p=t-r,m=c*c+l*l,h=c*u+l*d,g=c*f+l*p,ee=u*u+d*d,te=u*f+d*p,_=1/(m*ee-h*h),v=(ee*g-h*te)*_,ne=(m*te-h*g)*_;return v>=0&&ne>=0&&v+ne<1}var qt=class extends e{constructor(...e){let t=e[0];t instanceof p&&(h(m,`Mesh: use new Mesh({ geometry, shader }) instead`),t={geometry:t,shader:e[1]},e[3]&&(h(m,`Mesh: drawMode argument has been removed, use geometry.topology instead`),t.geometry.topology=e[3]));let{geometry:r,shader:i,texture:a,roundPixels:o,state:s,...c}=t;super({label:`Mesh`,...c}),this.renderPipeId=`mesh`,this._shader=null,this.allowChildren=!1,this.shader=i??null,this.texture=a??i?.texture??d.WHITE,this.state=s??n.for2d(),this._geometry=r,this._geometry.on(`update`,this.onViewUpdate,this),this.roundPixels=o??!1}get material(){return h(m,`mesh.material property has been removed, use mesh.shader instead`),this._shader}set shader(e){this._shader!==e&&(this._shader=e,this.onViewUpdate())}get shader(){return this._shader}set geometry(e){this._geometry!==e&&(this._geometry?.off(`update`,this.onViewUpdate,this),e.on(`update`,this.onViewUpdate,this),this._geometry=e,this.onViewUpdate())}get geometry(){return this._geometry}set texture(e){e||=d.EMPTY;let t=this._texture;t!==e&&(t&&t.dynamic&&t.off(`update`,this.onViewUpdate,this),e.dynamic&&e.on(`update`,this.onViewUpdate,this),this.shader&&(this.shader.texture=e),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}get batched(){return this._shader||this.state.data&12?!1:this._geometry instanceof pe?this._geometry.batchMode===`auto`?this._geometry.positions.length/2<=100:this._geometry.batchMode===`batch`:!1}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(e){let{x:t,y:n}=e;if(!this.bounds.containsPoint(t,n))return!1;let r=this.geometry.getBuffer(`aPosition`).data,i=this.geometry.topology===`triangle-strip`?3:1;if(this.geometry.getIndex()){let e=this.geometry.getIndex().data,a=e.length;for(let o=0;o+2<a;o+=i){let i=e[o]*2,a=e[o+1]*2,s=e[o+2]*2;if(Kt(t,n,r[i],r[i+1],r[a],r[a+1],r[s],r[s+1]))return!0}}else{let e=r.length/2;for(let a=0;a+2<e;a+=i){let e=a*2,i=(a+1)*2,o=(a+2)*2;if(Kt(t,n,r[e],r[e+1],r[i],r[i+1],r[o],r[o+1]))return!0}}return!1}destroy(e){if(super.destroy(e),typeof e==`boolean`?e:e?.texture){let t=typeof e==`boolean`?e:e?.textureSource;this._texture.destroy(t)}this._geometry?.off(`update`,this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null,this._gpuData=null}},Jt=class e extends _{constructor(...e){let t=e[0];Array.isArray(e[0])&&(t={textures:e[0],autoUpdate:e[1]});let{animationSpeed:n=1,autoPlay:r=!1,autoUpdate:i=!0,loop:a=!0,onComplete:o=null,onFrameChange:s=null,onLoop:c=null,textures:l,updateAnchor:u=!1,...f}=t,[p]=l;super({...f,texture:p instanceof d?p:p.texture}),this._textures=null,this._durations=null,this._autoUpdate=i,this._isConnectedToTicker=!1,this.animationSpeed=n,this.loop=a,this.updateAnchor=u,this.onComplete=o,this.onFrameChange=s,this.onLoop=c,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=l,r&&this.play()}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(i.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(i.shared.add(this.update,this,a.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;let t=e.deltaTime,n=this.animationSpeed*t,r=this.currentFrame;if(this._durations!==null){let e=this._currentTime%1*this._durations[this.currentFrame];for(e+=n/60*1e3;e<0;)this._currentTime--,e+=this._durations[this.currentFrame];let r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);e>=this._durations[this.currentFrame];)e-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=e/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this._updateTexture())}_updateTexture(){let e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this.texture=this._textures[e],this.updateAnchor&&this.texture.defaultAnchor&&this.anchor.copyFrom(this.texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e=!1){if(typeof e==`boolean`?e:e?.texture){let t=typeof e==`boolean`?e:e?.textureSource;this._textures.forEach(e=>{this.texture!==e&&e.destroy(t)})}this._textures=[],this._durations=null,this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){let n=[];for(let e=0;e<t.length;++e)n.push(d.from(t[e]));return new e(n)}static fromImages(t){let n=[];for(let e=0;e<t.length;++e)n.push(d.from(t[e]));return new e(n)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof d)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this._updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);let t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this._updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(i.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(i.shared.add(this.update,this),this._isConnectedToTicker=!0))}},Yt=class extends e{constructor(e,t){let{text:n,resolution:r,style:i,anchor:a,width:o,height:s,roundPixels:c,...l}=e;super({...l}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=n??``,this.style=i,this.resolution=r??null,this.allowChildren=!1,this._anchor=new ee({_onUpdate:()=>{this.onViewUpdate()}}),a&&(this.anchor=a),this.roundPixels=c??!1,o!==void 0&&(this.width=o),s!==void 0&&(this.height=s)}get anchor(){return this._anchor}set anchor(e){typeof e==`number`?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){e||={},this._style?.off(`update`,this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on(`update`,this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||={},e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){typeof e==`object`?(t=e.height??e.width,e=e.width):t??=e,e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){let t=this.bounds.width,n=this.bounds.height,r=-t*this.anchor.x,i=0;return e.x>=r&&e.x<=r+t&&(i=-n*this.anchor.y,e.y>=i&&e.y<=i+n)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e==`boolean`?e:e?.style)&&this._style.destroy(e),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}};function Xt(e,t){let n=e[0]??{};return(typeof n==`string`||e[1])&&(h(m,`use new ${t}({ text: "hi!", style }) instead`),n={text:n,style:e[1]}),n}var C=class extends Yt{constructor(...e){let t=Xt(e,`Text`);super(t,x),this.renderPipeId=`text`,t.textureStyle&&(this.textureStyle=t.textureStyle instanceof f?t.textureStyle:new f(t.textureStyle))}updateBounds(){let e=this._bounds,t=this._anchor,n=0,r=0;if(this._style.trim){let{frame:e,canvasAndContext:t}=ue.getCanvasAndContext({text:this.text,style:this._style,resolution:1});ue.returnCanvasAndContext(t),n=e.width,r=e.height}else{let e=me.measureText(this._text,this._style);n=e.width,r=e.height}e.minX=-t._x*n,e.maxX=e.minX+n,e.minY=-t._y*r,e.maxY=e.minY+r}};r.add(Se,Ce);const w={blocks:[],blocksSprites:[],damage:5,money:0,moneyPerKill:5,hp:20,maxHp:20,wave:1,enemiesHp:5,radiusX:350,radiusY:200,respawnDuration:500,enemiesLeft:0,enemiesKilled:0,enemiesOnWave:4,enemiesDamage:4,enemies:[],shopHp:20,shopRange:20,shopMoneyWave:20,spawnSpeed:1,isGameEnded:!1,SPAWN_INTERVAL:500,ENEMY_SPEED:1.5,TOWER_FIRE_RATE:250,shadows:[],anims:[]},T={x:32,y:40};async function Zt(){let e=new l;k.stage.addChild(e);let t=await S.load(`Sprites/Landscape tiles/grass.png`),n={x:window.innerWidth/2.2,y:window.innerHeight/16},r={...n};for(let i=0;i<49;i++){let a=new _(t);a.width=250,a.height=250,a.x=r.x,a.y=r.y;let o=new b;o.beginFill(16777215),o.lineTo(0,-100),o.lineTo(0,109),o.lineTo(125,186),o.lineTo(250,109),o.lineTo(250,-100),o.closePath(),o.endFill(),o.x=a.x,o.y=a.y,e.addChild(o),a.mask=o,e.addChild(a),w.blocks.push([a.x,a.y]),w.blocksSprites.push(a),r.x+=120,r.y-=-74,(i+1)%7==0&&(r.x=n.x-120,r.y=n.y+74,n.x-=120,n.y+=74,r={...n})}return e}let E,Qt=!1;const D=new b;function $t(e){return e<.5?4*e*e*e:1-(-2*e+2)**3/2}async function en(){let e=new _,t=new _,n=await S.load(`Sprites/Towers/Archer/archer_level_1.png`),r=await S.load(`Sprites/Towers/Archer/bow_animation(1).png`);e.texture=n,t.texture=r,t.setSize(27,37),t.anchor.set(.5,.5),t.x=e.width/2-80,t.y=e.height/2-112,e.addChild(t),E=t,e.width=130,e.height=166,e.anchor.set(.5,.5),e.x=w.blocks[17][0]+5,e.y=w.blocks[17][1]+120,e.interactive=!0;let i=!1,a=0;function o(){if(!i)return;Qt?a<1?a+=1/15:a=1:a>0?a-=1/15:a=0;let t=$t(a),n=130+10*t,r=166+10*t;e.width=n,e.height=r,Qt&&a<1||!Qt&&a>0?requestAnimationFrame(o):i=!1}return e.on(`pointerover`,()=>{if(!w.isGameEnded){D.clear().ellipse(A.x+A.width/2-65,A.y+A.height/2-44,w.radiusX,w.radiusY).stroke({width:4,color:`white`}),D.alpha=0,k.stage.addChild(D);let e=performance.now(),t=()=>{let n=performance.now()-e,r=Math.min(n/300,1);r=$t(r),D.alpha=r,r>=1&&k.ticker.remove(t)};k.ticker.add(t),Qt=!0,i||(i=!0,requestAnimationFrame(o))}}).on(`pointerout`,()=>{if(!w.isGameEnded){let e=performance.now(),t=()=>{let n=performance.now()-e,r=Math.min(n/50,1);r=$t(r),D.alpha=1-r,D.alpha<=0&&(k.ticker.remove(t),k.stage.removeChild(D))};k.ticker.add(t),Qt=!1,i||(i=!0,requestAnimationFrame(o))}}),k.stage.addChild(e),e}var tn=await S.load(`Sprites/Animations/Ellipse 5.png`),nn=await Promise.all([1,2,3,4,5,6,5,4,3,2,1].map(e=>S.load(`Sprites/Animations/UFO(1)Walk${e}.png`))),rn=await Promise.all([1,2,3,4,5,6,5,4,3,2,1].map(e=>S.load(`Sprites/Animations/UFO(2)Walk${e}.png`))),an=await Promise.all([1,2,3,4,5,6,5,4,3,2,1].map(e=>S.load(`Sprites/Animations/UFO(3)Walk${e}.png`))),on=await Promise.all([1,2,3,4,5,6,5,4,3,2,1].map(e=>S.load(`Sprites/Animations/UFO(4)Walk${e}.png`))),sn=await Promise.all([1,2,3,4,5,6,5,4,3,2,1].map(e=>S.load(`Sprites/Animations/UFO(5)Walk${e}.png`))),cn=await Promise.all([1,2,3,4,5,6,5,4,3,2,1].map(e=>S.load(`Sprites/Animations/UFO(6)Walk${e}.png`))),ln=await Promise.all([1,2,3,4,5,6,5,4,3,2,1].map(e=>S.load(`Sprites/Animations/UFO(7)Walk${e}.png`)));const un=await Promise.all([1,2,3,4].map(e=>S.load(`Sprites/UFO/cube${e}.png`))),dn=await Promise.all([1,2,3,4,5,6,7,8,9,10].map(e=>S.load(`Sprites/Golem/Golem_walk${e}.png`)));var O;async function fn(){w.wave<=5?O=nn:w.wave>=5?(O=rn,w.enemiesHp+=10,w.moneyPerKill+=10):w.wave>=10?(O=an,w.enemiesHp+=10,w.moneyPerKill+=10):w.wave>=15?(O=on,w.enemiesHp+=10,w.moneyPerKill+=10):w.wave>=20?(O=sn,w.enemiesHp+=10,w.moneyPerKill+=10):w.wave>=25?(O=cn,w.enemiesHp+=10,w.moneyPerKill+=10):w.wave>=30&&(O=ln,w.enemiesHp+=10,w.moneyPerKill+=10);for(let e=0;e<w.enemiesOnWave;e++){if(ar(),w.isGameEnded)return;if(Math.random()<.25){await _n(),await new Promise(e=>setTimeout(e,w.SPAWN_INTERVAL));continue}let e=Math.floor(Math.random()*7)+1;switch(e){case 1:O=nn;break;case 2:O=rn;break;case 3:O=an;break;case 4:O=on;break;case 5:O=sn;break;case 6:O=cn;break;case 7:O=ln;break}let t=await S.load(`Sprites/UFO/UFO(${e}).png`),n=new _(t);pn(n),n.setSize(0,0),n.anchor.set(.5,1),k.stage.addChild(n);let r=await mn(n.x,n.y);await hn(n),r&&k.stage.removeChild(r),await gn(n);let i=new Jt(O);i.x=n.x,i.y=n.y,i.anchor.set(.5,1),i.width=T.x,i.height=T.y,i.animationSpeed=.5,i.loop=!0,i.play();let a=k.stage.children.indexOf(n);a===-1&&(a=k.stage.children.length),k.stage.removeChild(n),k.stage.addChildAt(i,a),w.enemies.push(i),w.enemiesLeft+=1,w.anims.push(r),await new Promise(e=>setTimeout(e,w.SPAWN_INTERVAL))}}function pn(e){let t=[{x:w.blocks[0][0]+110,y:w.blocks[0][1]+50},{x:w.blocks[3][0]+110,y:w.blocks[3][1]+50},{x:w.blocks[6][0]+110,y:w.blocks[6][1]+50},{x:w.blocks[21][0]+110,y:w.blocks[21][1]+50},{x:w.blocks[27][0]+110,y:w.blocks[27][1]+50},{x:w.blocks[42][0]+110,y:w.blocks[42][1]+50},{x:w.blocks[45][0]+110,y:w.blocks[45][1]+50},{x:w.blocks[48][0]+110,y:w.blocks[48][1]+50}],n=Math.floor(Math.random()*t.length),r=(Math.random()-.5)*20,i=(Math.random()-.5)*20;e.x=t[n].x+r,e.y=t[n].y+i}async function mn(e,t){return new Promise(n=>{let r=new _(tn);r.x=e,r.y=t,r.anchor.set(.5),r.scale.set(1),k.stage.addChild(r),w.anims.push(r);let i=w.respawnDuration/w.spawnSpeed,a=performance.now(),o=.01,s=()=>{w.isGameEnded&&k.ticker.remove(s);let e=performance.now()-a,t=Math.min(e/i,1);t=vn(t),r.scale.set(o+(1-o)*t),t>=1&&(k.ticker.remove(s),n(r))};k.ticker.add(s)})}async function hn(e){return new Promise(t=>{let n=new b;n.beginFill(16777215),n.drawRect(-T.x/2,-T.y,T.x,T.y),n.endFill(),n.x=e.x,n.y=e.y,k.stage.addChild(n),w.shadows.push(n),w.anims.push(e),e.anchor.set(.5,1),e.zIndex=1,e.width=T.x,e.height=T.y,e.mask=n;let r=e.y+T.y,i=e.y;e.y=r;let a=w.respawnDuration/w.spawnSpeed,o=performance.now(),s=()=>{w.isGameEnded&&k.ticker.remove(s);let c=performance.now()-o,l=Math.min(c/a,1);l=vn(l),e.y=r+(i-r)*l,l>=1&&(k.ticker.remove(s),e.mask=null,k.stage.removeChild(n),t())};k.ticker.add(s)})}async function gn(e){return new Promise(t=>{let n=new _(tn);n.x=e.x,n.y=e.y,n.anchor.set(.5),n.scale.set(2);let r=k.stage.children.indexOf(e);r===-1&&(r=k.stage.children.length),k.stage.addChildAt(n,r),w.anims.push(n);let i=w.respawnDuration/w.spawnSpeed,a=performance.now(),o=()=>{w.isGameEnded&&k.ticker.remove(o);let e=performance.now()-a,r=Math.min(e/i,1);r=vn(r),n.scale.set(1+-.99*r),r>=1&&(k.ticker.remove(o),k.stage.removeChild(n),t())};k.ticker.add(o)})}async function _n(){let e=new Jt(un);e.anchor.set(.5,1),e.animationSpeed=.15,e.loop=!0,e.width=60,e.height=60,e.play();let t=new b;t.beginFill(`#000000`),t.drawEllipse(e.x,e.y,18,13),t.endFill(),t.alpha=.3;let n=[{x:w.blocks[3][0]+110,y:w.blocks[3][1]+50},{x:w.blocks[6][0]+110,y:w.blocks[6][1]+50},{x:w.blocks[21][0]+110,y:w.blocks[21][1]+50},{x:w.blocks[27][0]+110,y:w.blocks[27][1]+50},{x:w.blocks[42][0]+110,y:w.blocks[42][1]+50},{x:w.blocks[45][0]+110,y:w.blocks[45][1]+50}],r=Math.floor(Math.random()*n.length),i=(Math.random()-.5)*20,a=(Math.random()-.5)*20;e.x=n[r].x+i,e.y=n[r].y+a,e.x<A.x?e.scale.set(1,1):e.scale.set(-1,1),k.stage.addChild(e),k.stage.addChild(t),w.enemies.push(e),w.shadows.push(t),w.enemiesLeft+=1;let o=e.y,s=n=>{if(w.isGameEnded&&k.ticker.remove(s),!w.enemies.includes(e)){k.stage.removeChild(t);return}let r=A.x-e.x,i=A.y-o+25,a=Math.sqrt(r*r+i*i);i/=a,o+=i*w.ENEMY_SPEED*n.deltaMS/20;let c=Math.sin(performance.now()/200)*10;e.y=o+c,t.x=e.x,t.y=o+10,t.scale.set(1+(e.y-t.y)/60)};return k.ticker.add(s),e}function vn(e){return e<.5?4*e*e*e:1-(-2*e+2)**3/2}var yn=0;let bn=null;function xn(){bn&&k.ticker.remove(bn),bn=e=>{w.isGameEnded||Sn(e)},k.ticker.add(bn)}function Sn(e){let t=e.deltaTime;for(let e=0;e<w.enemies.length;e++){let n=w.enemies[e];if(!n||!n.x||!n.y)continue;let r=A.x-n.x,i=A.y-n.y+25,a=Math.sqrt(r*r+i*i);if(a<50){yn++,yn>100&&(yn=0),yn==100&&(Cn(A.x,A.y+20),w.hp-=w.enemiesDamage);continue}r/=a,i/=a,n instanceof Jt&&n.textures===dn?(n.x+=r*w.ENEMY_SPEED*t/2,n.y+=i*w.ENEMY_SPEED*t/2):(n.x+=r*w.ENEMY_SPEED*t,n.y+=i*w.ENEMY_SPEED*t)}}function Cn(e,t){let n=[],r=Math.floor(Math.random()*5)+3;for(let i=0;i<r;i++){let r=new b;r.zIndex=A.zIndex+2;let i=15+Math.random()*3;r.beginFill(`gray`),r.drawRect(-i/2,-i/2,i,i),r.endFill(),r.x=e,r.y=t,r.vx=Math.random()-.5,r.vy=-Math.random()*5,k.stage.addChild(r),n.push(r)}let i=e=>{for(let r of n)r.vy+=.2,r.x+=r.vx*e.deltaTime,r.y+=r.vy*e.deltaTime,r.alpha-=.02*e.deltaTime,r.y>t+20&&(r.vy*=-.3),r.alpha<=0&&(k.stage.removeChild(r),n.splice(n.indexOf(r),1));n.length||k.ticker.remove(i)};k.ticker.add(i)}function wn(e){return e<.5?4*e*e*e:1-(-2*e+2)**3/2}function Tn(e,t,n,r){let i=new l;i.x=0,i.y=0,i.zIndex=1e4,e.stage.addChild(i);let a=new b;a.rect(0,0,window.innerWidth,window.innerHeight),a.fill(`#201820ff`),i.addChild(a);let o=new b;o.rect(0,0-window.innerHeight,window.innerWidth,window.innerHeight),o.fill(`#201820ff`),i.addChild(o);let s=new b;s.roundRect(0,0,300,100,40),s.fill(`#b6a12eff`),s.x=window.innerWidth/2-s.width/2,s.y=window.innerHeight/2-s.height/2-20,i.addChild(s);let c=new b;c.roundRect(0,0,300,100,40),c.fill(`#d6be35ff`),c.x=window.innerWidth/2-c.width/2,c.y=window.innerHeight/2-c.height/2-40,i.addChild(c);let u=new C({text:`RESTART`,style:{fontFamily:`Arial`,fontSize:50,fontWeight:`bold`,fill:`#50493cff`}});u.anchor.set(.5),u.x=window.innerWidth/2,u.y=window.innerHeight/2-u.height/2-10,i.addChild(u),c.interactive=!0,c.on(`pointerdown`,()=>{let t=performance.now(),n=window.innerHeight/2-c.height/2-40,r=window.innerHeight/2-c.height/2-20,i=window.innerHeight/2-u.height/2-10,a=window.innerHeight/2-20;function o(){let s=(performance.now()-t)/100;s=wn(s),c.y=n+(r-n)*s,u.y=i+(a-i)*s,s>=1&&e.ticker.remove(o)}e.ticker.add(o),g()}),c.on(`pointerup`,()=>{let t=performance.now(),n=c.y,r=window.innerHeight/2-c.height/2-40,i=u.y,a=window.innerHeight/2-u.height/2-10;function o(){let s=(performance.now()-t)/100;s=wn(s),c.y=n+(r-n)*s,u.y=i+(a-i)*s,s>=1&&e.ticker.remove(o)}e.ticker.add(o)});let d=performance.now(),f=window.innerHeight,p=window.innerHeight/2,m=window.innerHeight/2;function h(){let t=(performance.now()-d)/1e3;t=wn(t),a.y=f+(p-f)*t,o.y=0+(m-0)*t,u.alpha=0+1*t,c.alpha=0+1*t,s.alpha=0+1*t,t>=1&&e.ticker.remove(h)}e.ticker.add(h);async function g(){En(e),w.isGameEnded=!1,w.damage=5,w.money=0,w.moneyPerKill=5,w.hp=20,w.maxHp=20,w.wave=1,w.radiusX=350,w.radiusY=200,w.enemiesLeft=0,w.enemiesKilled=0,w.enemiesOnWave=w.wave*2+2,w.enemiesHp=w.wave*2+5,w.enemiesDamage=4,w.enemies=[],w.shopHp=20,w.shopRange=20,w.shopMoneyWave=20,w.enemies=[],w.anims=[],w.shadows=[],t(),n(),ir();let r=performance.now(),i=window.innerHeight/2,l=window.innerHeight,d=window.innerHeight/2;function f(){w.isGameEnded&&En(e);let t=(performance.now()-r)/1e3;t=wn(t),a.y=i+(l-i)*t,o.y=d+(0-d)*t,u.alpha=1+-1*t,c.alpha=1+-1*t,s.alpha=1+-1*t,t>=1&&e.ticker.remove(f)}e.ticker.add(f)}}function En(e){for(let t of w.enemies)e.stage.removeChild(t);w.enemies=[];for(let t of w.shadows)e.stage.removeChild(t);w.shadows=[];for(let t of w.anims)e.stage.removeChild(t);w.anims=[]}function Dn(e){return e<.5?4*e*e*e:1-(-2*e+2)**3/2}function On(e){let t=e.blocksSprites,n=e.blocks;if(!t?.length||!n?.length)return;let r={x:e.blocks[24][0],y:e.blocks[24][1]},i=n.map(([e,t],n)=>({index:n,dist:Math.sqrt((r.x-e)**2+(r.y-t)**2)}));i.sort((e,t)=>e.dist-t.dist);let a=[],o=[],s=i[0].dist;for(let{index:e,dist:t}of i)t-s>100&&(a.push(o),o=[],s=t),o.push(e);o.length>0&&a.push(o);let c=A.y;(()=>{let e=performance.now(),t=()=>{let n=performance.now()-e,r=Math.min(n/720,1),i=Dn(r),a=Math.sin(i*Math.PI)*30;A.y=c-a,r<1?requestAnimationFrame(t):A.y=c};requestAnimationFrame(t)})(),a.forEach((e,n)=>{let r=n*120;setTimeout(()=>{for(let n of e){let e=t[n];if(!e)continue;let r=e.y,i=performance.now(),a=()=>{let t=performance.now()-i,n=Math.min(t/400,1),o=Dn(n),s=Math.sin(o*Math.PI)*20;e.y=r-s,n<1?requestAnimationFrame(a):e.y=r};requestAnimationFrame(a)}},r)})}var kn=`#define M_PI 3.14159

in vec2 vUV;

uniform sampler2D uTexture;
uniform sampler2D uTexture2;
uniform float uTime;
uniform vec2 uResolution;

float islandMask(vec2 uv){
    uv = (uv - 0.5) * 2.0;                 
    float w = 0.58;     
    float h = 0.65;     
    return smoothstep(0.0, 0.02, w - abs(uv.x)) * 
           smoothstep(0.0, 0.02, h - abs(uv.y));
}

float random (vec2 st) {
    return fract(sin(dot(st.xy,
                         vec2(12.9898,78.233)))
                 * 43758.5453123);
}

float noise (vec2 st) {
    vec2 i = floor(st);
    vec2 f = fract(st);

    float a = random(i);
    float b = random(i + vec2(1.0, 0.0));
    float c = random(i + vec2(0.0, 1.0));
    float d = random(i + vec2(1.0, 1.0));

    vec2 u = f*f*(3.0-2.0*f);

    return mix(a, b, u.x) +
            (c - a)* u.y * (1.0 - u.x) +
            (d - b) * u.x * u.y;
}

float roundedBoxSDF(vec2 uv, vec2 size, float radius) {
    vec2 d = abs(uv) - size + radius;
    return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
}

void main() {

    vec2 uv  = vUV - 0.5;
    vec2 uv2 = vUV - 0.5;

    vec2 foam1 = vUV - 0.5;
    vec2 foam2 = vUV - 0.5;
    vec2 foam3 = vUV - 0.5;
    vec2 foam4 = vUV - 0.5;

    float aspect = uResolution.x / 1.6323287671 / uResolution.y;
    uv.x  *= aspect;
    uv2.x *= aspect;

    float yTheta = M_PI / 4.0;
    mat3 yRot = mat3(
        cos(yTheta), 0.0,  sin(yTheta),
        0.0,         1.0,  0.0,
       -sin(yTheta), 0.0,  cos(yTheta)
    );

    uv  = (vec3(uv.x,  0.0, uv.y)  * yRot).xz;
    uv2 = (vec3(uv2.x, 0.0, uv2.y) * yRot).xz;

    vec2 st = gl_FragCoord.xy/uResolution.xy - 0.5;
    st.x *= aspect;
    st = (vec3(st.x, 0.0, st.y) * yRot).xz;
    st += 0.5;

    float waveStr  = 0.3;
    float waveStr2 = 0.25;

    uv  += vec2(
        sin(uv.x *10.0 + uTime*5.0)*0.002*waveStr  + sin((uv.x + uv.y)*15.0 + uTime*8.0)*0.002*waveStr,
        sin(uv.x *12.0 - uTime*6.0)*0.003*waveStr  + cos((uv.x - uv.y)*18.0 - uTime*5.6)*0.001*waveStr
    );

    uv2 += vec2(
        sin(uv2.x*10.0 + uTime*2.5)*0.002*waveStr2 + sin((uv2.x+uv2.y)*15.0 + uTime*4.0)*0.002*waveStr2,
        sin(uv2.x*12.0 - uTime*3.0)*0.003*waveStr2 + cos((uv2.x-uv2.y)*18.0 - uTime*2.8)*0.001*waveStr2
    );

    uv  = fract(uv  * 8.0);
    uv2 = fract(uv2 * 8.0);

    vec4 img1 = texture(uTexture,  uv);
    vec4 img2 = texture(uTexture2, uv2);

vec2 center = vec2(0.515, 0.51);
vec2 size = vec2(0.315, 0.315);
float radius = 0.05;

vec2 uvCentered = st - center;
float dist = roundedBoxSDF(uvCentered, size, radius);

float foamNoise = noise(vec2(st * 10.0 + uTime * 1.0)) * 0.02;
float foam = smoothstep(-0.00999, -0.01, dist + foamNoise);
vec4 foamColor = vec4(foam);

img2 *= vec4(1.0, 1.0, 1.0, 0.45);
foamColor *= vec4(0.47058823529, 0.79607843137, 0.96078431372, 1.0);

vec4 wave = mix(mix(img1, img2, img2.a), foamColor, foamColor.a);

vec4 final = vec4(wave.rgb, 1.0);

gl_FragColor = final;

}`,An=`in vec2 aPosition;
in vec2 aUV;

out vec3 vColor;
out vec2 vUV;

uniform mat3 uProjectionMatrix;
uniform mat3 uWorldTransformMatrix;

uniform mat3 uTransformMatrix;

void main() {

    mat3 mvp = uProjectionMatrix * uWorldTransformMatrix * uTransformMatrix;
    gl_Position = vec4((mvp * vec3(aPosition, 1.0)).xy, 0.0, 1.0);

    vUV = aUV;
}`;let jn=(async()=>{let e=await S.load(`Sprites/water1.png`),n=await S.load(`Sprites/water2.png`),r=new p({attributes:{aPosition:[0,0,window.innerWidth,0,window.innerWidth,window.innerHeight,0,0,window.innerWidth,window.innerHeight,0,window.innerHeight],aUV:[0,0,1,0,1,1,0,0,1,1,0,1]}}),i=t.from({gl:{vertex:An,fragment:kn},resources:{uTexture:e.source,uTexture2:n.source,backgroundUniforms:{resolution:{value:[window.innerWidth,window.innerHeight],type:`vec2<f32>`},uTime:{value:0,type:`f32`}}}}),a=new qt({geometry:r,shader:i});a.zIndex=-100,k.stage.addChild(a),window.addEventListener(`resize`,()=>{r.attributes.aPosition.buffer.data=new Float32Array([0,0,window.innerWidth,0,window.innerWidth,window.innerHeight,0,0,window.innerWidth,window.innerHeight,0,window.innerHeight]),r.attributes.aPosition.buffer.update(),i.resources.backgroundUniforms.uniforms.resolution=[window.innerWidth,window.innerHeight],i.resources.backgroundUniforms.update()}),k.ticker.add(()=>{i.resources.backgroundUniforms.uniforms.uTime=performance.now()/1e3})});const k=new je;await k.init({resizeTo:window,backgroundColor:1087931}),document.body.appendChild(k.canvas),k.stage.sortableChildren=!0,jn(),await Zt();let A=await en();xn(),k.stage.sortableChildren=!0,A.zIndex=1e3;var Mn=await S.load(`Sprites/Towers/Archer/archer_level_1.png`),Nn=await S.load(`Sprites/Towers/Archer/archer_level_2.png`),Pn=await S.load(`Sprites/Towers/Archer/archer_level_3.png`),Fn=await S.load(`Sprites/gear.png`);k.ticker.add(()=>{if(!w.isGameEnded){let e=A.y+A.height*(1-A.anchor.y);for(let t of w.enemies)t.y+t.height*t.anchor.y<e?t.zIndex=A.zIndex-1:t.zIndex=A.zIndex+1}});var In=await S.load(`Sprites/Towers/Archer/arrow.png`),Ln=await S.load(`Sprites/heart.png`),Rn=await S.load(`Sprites/coin.png`),zn=0,Bn=10;k.ticker.add(e=>{if(!w.isGameEnded)Vn(e.deltaMS);else return});function j(e){return e<.5?4*e*e*e:1-(-2*e+2)**3/2}function Vn(e){if(zn-=e,zn>0)return;let t=w.enemies.find(e=>Un(e.x,e.y,A.x+A.width/2-65,A.y+A.height/2-44,w.radiusX,w.radiusY)&&!e.isTargeted);t&&(t.hp===void 0&&(t.hp=w.enemiesHp),t.isTargeted=!0,Hn(t,w.damage,Bn),zn=w.TOWER_FIRE_RATE)}function Hn(e,t,n){if(!e.parent)return;if(E){let t=A.x+A.width/2,n=A.y+A.height/2,r=e.x-t,i=e.y-n,a=Math.atan2(i,r),o=Math.cos(a)*25,s=Math.sin(a)*25;E.x=A.width/2+o-65,E.y=A.height/2+s-120,E.rotation=a+Math.PI;let c=Math.cos(a)*8,l=Math.sin(a)*8,u=E.x,d=E.y,f=u-c,p=d-l,m=performance.now(),h=e=>{let t=Math.min((e-m)/150,1),n=1-(1-t)**3;E.x=f+(u-f)*(1-n),E.y=p+(d-p)*(1-n),t<1?requestAnimationFrame(h):(E.x=u,E.y=d)};requestAnimationFrame(h)}let r=new _(In);r.anchor.set(.5,0),r.width=21,r.height=35,r.x=E.x+A.x,r.y=E.y+A.y,r.zIndex=A.zIndex+2,k.stage.addChild(r);let i=a=>{if(!e.parent){k.stage.removeChild(r),k.ticker.remove(i);return}let o=e.x-r.x,s=e.y-20-r.y;e instanceof Jt&&e.textures===un&&(s=e.y-30-r.y);let c=Math.sqrt(o*o+s*s);if(c<5){if(e.hp-=t,e.hp<=0){let t=e.x,n=e.y;e.parent&&e.parent.removeChild(e),w.enemiesKilled++;let r=w.enemies.indexOf(e);r!==-1&&w.enemies.splice(r,1),Wn(t,n,`#e4e4e4ff`),gr(t,n)}e.isTargeted=!1,k.stage.removeChild(r),k.ticker.remove(i),e.isTargeted=!1,k.stage.removeChild(r),k.ticker.remove(i);return}r.x+=o/c*n*a.deltaTime,r.y+=s/c*n*a.deltaTime,r.rotation=Math.atan2(s,o)+Math.PI/2,(r.x<0||r.x>k.screen.width||r.y<0||r.y>k.screen.height)&&(k.stage.removeChild(r),e.isTargeted=!1,k.ticker.remove(i))};k.ticker.add(i)}function Un(e,t,n,r,i,a){let o=e-n,s=t-r;return o*o/(i*i)+s*s/(a*a)<=1}function Wn(e,t,n){let r=[],i=Math.floor(Math.random()*5)+3;for(let a=0;a<i;a++){let i=new b,a=3+Math.random()*3;i.beginFill(`${n}`),i.drawRect(-a/2,-a/2,a,a),i.endFill(),i.x=e,i.y=t,i.vx=Math.random()-.5,i.vy=-Math.random()*5,k.stage.addChild(i),r.push(i)}let a=e=>{for(let n of r)n.vy+=.2,n.x+=n.vx*e.deltaTime,n.y+=n.vy*e.deltaTime,n.alpha-=.02*e.deltaTime,n.y>t+20&&(n.vy*=-.3),n.alpha<=0&&(k.stage.removeChild(n),r.splice(r.indexOf(n),1));r.length||k.ticker.remove(a)};k.ticker.add(a)}var M=new l;M.x=window.innerWidth-250,M.y=50,k.stage.addChild(M);var Gn=new b;Gn.beginFill(16777215),Gn.drawRoundedRect(0,0,200,40,20),Gn.endFill(),M.addChild(Gn);var Kn=new b;Kn.beginFill(16777215),Kn.drawRoundedRect(-5,-5,210,50,25),Kn.endFill(),Kn.alpha=.5,M.addChild(Kn);var qn=new b;qn.beginFill(9225791),qn.drawRoundedRect(0,0,200,40,20),qn.endFill(),M.addChild(qn);var N=new b;N.beginFill(16777215),N.drawRoundedRect(0,0,200,40,0),N.endFill(),qn.mask=N,M.addChild(N);var Jn=new x({fontFamily:`Arial`,fontSize:16,fontWeight:`bold`,fill:0}),Yn=new x({fontFamily:`Arial`,fontSize:24,fontWeight:`bold`,fill:0}),Xn=new C(`WAVE`,Jn);Xn.x=64,Xn.y=11,M.addChild(Xn);var Zn=new C(``,Yn);Zn.x=115,Zn.y=4,M.addChild(Zn);var Qn=0,$n=0,er=0,tr=0,nr=400,rr=!1;fn();function ir(){w.enemiesLeft=1,performance.now(),w.enemiesOnWave,Qn=0,$n=0,er=0,rr=!1,N.scale.x=0}function ar(){w.enemiesLeft,rr=!0,N.scale.x=Qn}ir();var P=new l;P.x=A.x-80,P.y=A.y-135,P.zIndex=1e4,k.stage.addChild(P);var or=new b;or.beginFill(`#c70000`),or.drawRoundedRect(0,0,40,40,30),or.endFill(),or.zIndex=A.zIndex+2,P.addChild(or);var sr=new b;sr.beginFill(`#ff3333`),sr.drawRoundedRect(-5,-5,50,50,30),sr.endFill(),sr.alpha=.5,sr.zIndex=A.zIndex+2,P.addChild(sr);var F=new _(Ln);F.x=8,F.y=10,F.width=24,F.height=22,F.zIndex=A.zIndex+2,F.alpha=.8,P.addChild(F);var cr=new x({fontFamily:`Arial`,fontSize:20,fontWeight:`bold`,fill:`#d82929ff`}),lr=new x({fontFamily:`Arial`,fontSize:18,fontWeight:`bold`,fill:`#d82929ff`}),ur=new C(``,cr);ur.x=55,ur.y=18,ur.zIndex=A.zIndex+2,P.addChild(ur);var dr=new C(`HEALTH`,lr);dr.x=55,dr.y=0,dr.zIndex=A.zIndex+2,P.addChild(dr);var I=new l;I.x=window.innerWidth-310,I.y=50,k.stage.addChild(I);var fr=new b;fr.beginFill(16777215),fr.drawRoundedRect(-20,-10,60,60,30),fr.endFill(),fr.zIndex=A.zIndex+2,I.addChild(fr);var pr=new b;pr.beginFill(16777215),pr.drawRoundedRect(-25,-15,70,70,50),pr.endFill(),pr.alpha=.5,pr.zIndex=A.zIndex+2,I.addChild(pr);var mr=new b;mr.beginFill(0),mr.drawRoundedRect(-20,-13,20,20,30),mr.endFill(),mr.alpha=.2,I.addChild(mr);var L=new _(Rn);L.x=-20,L.y=-15,L.width=20,L.height=20,L.zIndex=A.zIndex+2,L.alpha=1,I.addChild(L),mr.zIndex=L.zIndex;var hr=new x({fontFamily:`Arial`,fontSize:26,fontWeight:`bold`,fill:`#d82929ff`}),R=new C(``,hr);R.anchor.set(.5),R.x=10,R.y=18,R.zIndex=A.zIndex+2,I.addChild(R);function gr(e,t){let n=w.moneyPerKill>5?5:w.moneyPerKill;for(let r=0;r<n;r++){let r=new _(Rn);r.anchor.set(.5),r.scale.set(.05),r.x=e+(Math.random()-.5)*20,r.y=t+(Math.random()-.5)*20,r.zIndex=A.zIndex+5,r.alpha=0,k.stage.addChild(r);let i=performance.now(),a=e=>{let t=Math.min((e-i)/300,1);r.alpha=t,t<1&&requestAnimationFrame(a)};requestAnimationFrame(a);let o={x:r.x,y:r.y},s={x:I.x+L.x+10,y:I.y+L.y+10},c=performance.now()+Math.random()*200,l=1e3+Math.random()*300,u=e=>{let t=Math.min((e-c)/l,1);if(t<0){requestAnimationFrame(u);return}let i=j(t);r.x=o.x+(s.x-o.x)*i,r.y=o.y+(s.y-o.y)*i;let a=.05-.03*i;r.scale.set(a),t<1?requestAnimationFrame(u):(w.money+=w.moneyPerKill/n,k.stage.removeChild(r))};requestAnimationFrame(u)}}var _r=new x({fontFamily:`Arial`,fontSize:35,fontWeight:`bold`,fill:`#d6be35ff`}),vr=new x({fontFamily:`Arial`,fontSize:65,fontWeight:`bold`,fill:`#ffffffff`}),yr=new x({fontFamily:`Arial`,fontSize:35,fontWeight:`bold`,fill:`#2b2b2bff`}),z=new l;z.x=A.x-650,z.y=window.innerHeight-300,k.stage.addChild(z);var br=new b;br.beginFill(`#3c7c6cff`),br.drawRoundedRect(0,0,1300,400,20),br.endFill(),br.alpha=.5,br.zIndex=A.zIndex+2,z.addChild(br);var xr=new b;xr.beginFill(`#2f685aff`),xr.drawRoundedRect(30,30,287.5,300,20),xr.endFill(),xr.zIndex=A.zIndex+2,z.addChild(xr);var Sr=new C(`DAMAGE`,_r);Sr.x=96,Sr.y=50,Sr.zIndex=A.zIndex+2,z.addChild(Sr);var Cr=new C(``,vr);Cr.anchor.set(.5),Cr.x=173,Cr.y=140,Cr.zIndex=A.zIndex+2,z.addChild(Cr);var wr=new b;wr.beginFill(`#2f685aff`),wr.drawRoundedRect(347.5,30,287.5,300,20),wr.endFill(),wr.zIndex=A.zIndex+2,z.addChild(wr);var Tr=new C(`HEALTH`,_r);Tr.x=422,Tr.y=50,Tr.zIndex=A.zIndex+2,z.addChild(Tr);var Er=new C(``,vr);Er.anchor.set(.5),Er.x=492,Er.y=140,Er.zIndex=A.zIndex+2,z.addChild(Er);var Dr=new b;Dr.beginFill(`#2f685aff`),Dr.drawRoundedRect(665,30,287.5,300,20),Dr.endFill(),Dr.zIndex=A.zIndex+2,z.addChild(Dr);var Or=new C(`RANGE`,_r);Or.x=745,Or.y=50,Or.zIndex=A.zIndex+2,z.addChild(Or);var kr=new C(`1`,vr);kr.anchor.set(.5),kr.x=805,kr.y=140,kr.zIndex=A.zIndex+2,z.addChild(kr);var Ar=new b;Ar.beginFill(`#2f685aff`),Ar.drawRoundedRect(982.5,30,287.5,300,20),Ar.endFill(),Ar.zIndex=A.zIndex+2,z.addChild(Ar);var jr=new C(`MONEYWAVE`,_r);jr.x=1013,jr.y=50,jr.zIndex=A.zIndex+2,z.addChild(jr);var Mr=new C(`1`,vr);Mr.anchor.set(.5),Mr.x=1126,Mr.y=140,Mr.zIndex=A.zIndex+2,z.addChild(Mr);var Nr=new l;Nr.x=75,Nr.y=200,Nr.zIndex=A.zIndex+3,z.addChild(Nr);function Pr(e,t){let n=new l;n.x=e,n.y=0,Nr.addChild(n);let r=new b;r.beginFill(3964012),r.drawRoundedRect(-10,-10,220,80,30),r.endFill(),r.pivot.set(100,30),r.alpha=.5,r.x=100,r.y=30,n.addChild(r);let i=new b;i.beginFill(14073397),i.drawRoundedRect(0,0,200,60,20),i.endFill(),i.pivot.set(100,30),i.x=100,i.y=30,n.addChild(i);let a=new C(t.toString(),yr);a.anchor.set(.5),a.x=100,a.y=30,n.addChild(a);let o=new _(Rn);o.anchor.set(.5),o.x=-10,o.y=0,o.width=30,o.height=30,o.zIndex=A.zIndex+2,n.addChild(o);let s=new b;s.beginFill(0),s.drawRoundedRect(-15,0,30,30,15),s.endFill(),s.alpha=.2,s.x=o.x,s.y=o.y+6,n.addChild(s),n.interactive=!0,n.buttonMode=!0;let c={button:i,buttonBg:r,buttonText:a,cost:t,upgradeFunc:()=>{},hovered:!1};return n.on(`pointerover`,()=>c.hovered=!0),n.on(`pointerout`,()=>{c.hovered=!1,c.button.tint=16777215,c.buttonBg.tint=16777215}),n.on(`pointerdown`,()=>{w.money>=c.cost&&(w.money-=c.cost,c.cost=Math.floor(c.cost*1.35),c.upgradeFunc())}),k.ticker.add(()=>{if(!w.isGameEnded){let e=c.hovered?1.1:1;i.scale.x+=(e-i.scale.x)*.2,i.scale.y+=(e-i.scale.y)*.2,r.scale.x+=(e-r.scale.x)*.2,r.scale.y+=(e-r.scale.y)*.2,o.x=-10*i.scale.x,o.y=0*i.scale.y,s.x=o.x,s.y=o.y-12*i.scale.y}if(w.isGameEnded)c.cost=10;else return}),c}var Fr=[Pr(0,10),Pr(316,10),Pr(633,50),Pr(952,10)];Fr[0].upgradeFunc=()=>{w.damage=Math.floor(w.damage*1.3)},Fr[1].upgradeFunc=()=>{w.shopHp=Math.floor(w.maxHp*1.3),w.maxHp=w.shopHp,w.hp=w.shopHp},Fr[2].upgradeFunc=()=>{w.radiusX+=10,w.radiusY+=10,w.shopRange+=1},Fr[3].upgradeFunc=()=>{w.shopMoneyWave+=20};var B=new l;B.x=50,B.y=50,k.stage.addChild(B);var V=new b;V.interactive=!0,V.beginFill(`#6b6a6aff`),V.drawRoundedRect(0,0,100,40,15),V.endFill(),V.alpha=1,V.x=0,V.y=0,B.addChild(V);var H=new b;H.beginFill(`#504f4fff`),H.drawRoundedRect(-5,-5,110,50,20),H.endFill(),H.alpha=.5,H.x=0,H.y=0,B.addChild(H);var U=new b;U.beginFill(`#ffffffff`),U.drawRoundedRect(7.5,7.5,25,25,30),U.endFill(),U.alpha=1,U.x=0,U.y=0,B.addChild(U);var W=new b;W.beginFill(`#ffffffff`),W.drawRoundedRect(5,5,30,30,30),W.endFill(),W.alpha=.5,W.x=0,W.y=0,B.addChild(W);let Ir=!1;var Lr=0,Rr=0;V.on(`pointerdown`,()=>{Ir=!Ir,Ir?(w.respawnDuration=250,w.spawnSpeed=2,w.SPAWN_INTERVAL=100,w.ENEMY_SPEED=2.5,w.TOWER_FIRE_RATE=250):(w.respawnDuration=500,w.spawnSpeed=1,w.SPAWN_INTERVAL=500,w.ENEMY_SPEED=1.5,w.TOWER_FIRE_RATE=500),V.clear(),V.beginFill(Ir?`#4be653ff`:`#6b6a6aff`),V.drawRoundedRect(0,0,100,40,15),V.endFill(),Lr=U.x,Rr=Ir?60:0;let e=performance.now();function t(){let n=(performance.now()-e)/200;n>1&&(n=1);let r=j(n),i=Lr+(Rr-Lr)*r;U.x=i,W.x=i,n===1&&k.ticker.remove(t)}k.ticker.add(t)});var zr=new b;zr.beginFill(`#ffffffff`),zr.drawPolygon([new s(B.x+15,B.y+10),new s(B.x+25,B.y+20),new s(B.x+15,B.y+30)]),zr.endFill(),zr.alpha=.5,k.stage.addChild(zr);var Br=new b;Br.beginFill(`#ffffffff`),Br.drawPolygon([new s(B.x+78,B.y+10),new s(B.x+88,B.y+20),new s(B.x+78,B.y+30)]),Br.endFill(),Br.alpha=.5,k.stage.addChild(Br);var Vr=new b;Vr.beginFill(`#ffffffff`),Vr.drawPolygon([new s(B.x+70,B.y+10),new s(B.x+80,B.y+20),new s(B.x+70,B.y+30)]),Vr.endFill(),Vr.alpha=.5,k.stage.addChild(Vr),k.ticker.add(()=>{if(!w.isGameEnded)for(let e of Fr){w.money>=e.cost?(e.button.tint=65280,e.buttonBg.tint=65280):(e.button.tint=16711680,e.buttonBg.tint=16711680),e.buttonText.text=e.cost.toString();let t=e.hovered?1.1:1;e.button.scale.x+=(t-e.button.scale.x)*.2,e.button.scale.y+=(t-e.button.scale.y)*.2,e.buttonBg.scale.x+=(t-e.buttonBg.scale.x)*.2,e.buttonBg.scale.y+=(t-e.buttonBg.scale.y)*.2}});var Hr=window.innerHeight,Ur=window.innerHeight-300;z.y=Hr;var Wr=Hr,Gr=Hr,Kr=0,qr=600,Jr=!1;k.ticker.add(()=>{if(w.isGameEnded)return;let e=k.renderer.events.pointer.global,t=e.x>A.x-640&&e.x<A.x+640&&e.y>window.innerHeight-300?Ur:Hr;if(t!==Wr&&(Gr=z.y,Wr=t,Kr=performance.now(),Jr=!0),Jr){let e=performance.now()-Kr,t=Math.min(e/qr,1);t=j(t),z.y=Gr+(Wr-Gr)*t,t>=1&&(Jr=!1)}if(Er.text=w.shopHp.toString(),Cr.text=w.damage.toString(),kr.text=w.shopRange.toString(),Mr.text=w.shopMoneyWave.toString(),R.text=Math.floor(w.money).toString(),w.money>=1e3){let e=w.money/1e3;R.text=`${Number(e.toFixed(1))}K`}w.hp<=0&&(w.isGameEnded=!0,Tn(k,fn,xn,en),w.hp=0),ur.text=w.hp.toString(),Zn.text=w.wave.toString();let n=w.enemiesKilled,r=w.enemies.length,i=n+r||1,a=Math.min(n/i,1);if(a!==er&&($n=Qn,er=a,tr=performance.now(),rr=!0),rr){let e=performance.now()-tr,t=Math.min(e/nr,1);t=j(t),Qn=$n+(er-$n)*t,t>=1&&(rr=!1)}N.scale.x=Qn,er>=1&&!rr&&(w.enemiesHp+=2,w.wave++,w.enemiesKilled=0,w.enemies=[],w.enemiesOnWave+=2,w.respawnDuration=Math.max(200,w.respawnDuration-20),w.money+=w.shopMoneyWave,fn(),ir())});var Yr=1;k.ticker.add(()=>{(w.hp<=0||w.isGameEnded)&&k.stage.children.forEach(e=>{(e.zIndex==999||e.zIndex==1001)&&k.stage.removeChild(e)});let e=1;if(w.wave>=15&&w.wave<30&&(e=2),w.wave>=30&&(e=3),e!==Yr){switch(Yr=e,e){case 1:A.texture=Mn;break;case 2:A.texture=Nn;break;case 3:A.texture=Pn;break}On(w)}});var G=new l;G.x=170,G.y=40,G.zIndex=A.zIndex+3,k.stage.addChild(G);var Xr=new b;Xr.beginFill(`#464646ff`),Xr.drawRoundedRect(0,0,60,60,20),Xr.endFill(),Xr.alpha=.5,G.addChild(Xr);var K=new b;K.beginFill(`#5e5e5eff`),K.drawRoundedRect(5,5,50,50,15),K.endFill(),K.alpha=1,G.addChild(K),K.interactive=!0;var q=new _(Fn);q.anchor.set(.5),q.width=40,q.height=40,q.x=30,q.y=30,G.addChild(q),K.on(`pointerover`,()=>{let e=performance.now();function t(){let n=(performance.now()-e)/100;n=j(n),q.width=40+10*n,q.height=40+10*n,n>=1&&k.ticker.remove(t)}k.ticker.add(t)}),K.on(`pointerout`,()=>{let e=performance.now();function t(){let n=(performance.now()-e)/100;n=j(n),q.width=50-10*n,q.height=50-10*n,n>=1&&k.ticker.remove(t)}k.ticker.add(t)});var J=!1;K.on(`pointerdown`,()=>{J=!J,J?$.interactive=!0:$.interactive=!1;let e=Y.x,t=Y.y,n=J?45:200,r=J?110:60,i=Y.width,a=Y.height,o=J?184:0,s=J?115:0,c=performance.now();function l(){let u=(performance.now()-c)/200;u>1&&(u=1);let d=j(u);Y.x=e+(n-e)*d,Y.y=t+(r-t)*d,Y.width=i+(o-i)*d,Y.height=a+(s-a)*d,u===1&&k.ticker.remove(l)}k.ticker.add(l)});var Y=new l;Y.x=200,Y.y=60,Y.scale.set(0),Y.zIndex=A.zIndex+3,k.stage.addChild(Y);var X=new b;X.beginFill(`#464646ff`),X.drawRoundedRect(0,0,184,115,20),X.endFill(),X.x=0,X.y=0,X.alpha=.5,X.zIndex=A.zIndex+3,Y.addChild(X);var Z=new b;Z.beginFill(`#585858ff`),Z.drawRoundedRect(5,5,174,105,15),Z.endFill(),Z.x=0,Z.y=0,Z.zIndex=A.zIndex+3,Y.addChild(Z);var Q=new b;Q.beginFill(`#a5a346ff`),Q.drawRoundedRect(17,25,150,70,20),Q.endFill(),Q.x=0,Q.y=0,Q.zIndex=A.zIndex+3,Y.addChild(Q);var $=new b;$.beginFill(`#bebc52ff`),$.drawRoundedRect(17,16,150,70,20),$.endFill(),$.x=0,$.y=0,$.zIndex=A.zIndex+3,Y.addChild($),$.interactive=!0,$.on(`pointerdown`,()=>{fn();let e=performance.now();function t(){let n=(performance.now()-e)/100;n=j(n),$.y=0+10*n,Qr.y=40+10*n,n>=1&&k.ticker.remove(t)}k.ticker.add(t)}),$.on(`pointerup`,()=>{let e=performance.now();function t(){let n=(performance.now()-e)/100;n=j(n),$.y=10-10*n,Qr.y=50-10*n,n>=1&&k.ticker.remove(t)}k.ticker.add(t)});var Zr=new x({fontFamily:`Arial`,fontSize:20,fontWeight:`bold`,fill:`#000000ff`,align:`center`}),Qr=new C(`SPAWN`,Zr);Qr.x=55,Qr.y=40,Qr.zIndex=A.zIndex+3,Y.addChild(Qr);